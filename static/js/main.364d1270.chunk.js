(this.webpackJsonpwishlist=this.webpackJsonpwishlist||[]).push([[0],{11:function(e,t,a){e.exports={auth:"AuthForm_auth__YFpyD",horizontal_line:"AuthForm_horizontal_line__2lMkJ",control:"AuthForm_control__3W4on",actions:"AuthForm_actions__3nICL",line:"AuthForm_line__RHGRt",register:"AuthForm_register__CdECo",error:"AuthForm_error__2ib1S",footer:"AuthForm_footer__1WNKh",tradeLogo:"AuthForm_tradeLogo__Nvt74"}},12:function(e,t,a){e.exports={auth:"RegisterForm_auth__3dSUt",line:"RegisterForm_line__1StE_",control:"RegisterForm_control__3pzCr",actions:"RegisterForm_actions__3uDYN",error:"RegisterForm_error__1JfSU"}},15:function(e,t,a){"use strict";a.d(t,"a",(function(){return o}));var s=a(4),n=a(1),r=a.n(n),c=a(0),i=r.a.createContext({token:"",isLoggedIn:!1,login:function(e){},logut:function(){}}),o=function(e){var t=Object(n.useState)(null),a=Object(s.a)(t,2),r=a[0],o=a[1],l={token:r,isLoggedIn:!!r,login:function(e){o(e)},logout:function(){o(null)}};return Object(c.jsx)(i.Provider,{value:l,children:e.children})};t.b=i},23:function(e,t,a){e.exports={app:"App_app__25TFz",buttons:"App_buttons__2VRl_",addWish:"App_addWish__7t9ZG"}},24:function(e,t,a){e.exports={loader:"Spinner_loader__1reHD",load6:"Spinner_load6__3G2RZ",round:"Spinner_round__3VlyF"}},31:function(e,t,a){},38:function(e,t,a){"use strict";a.r(t);var s=a(1),n=a.n(s),r=a(22),c=a.n(r),i=a(10),o=(a(31),a(5)),l=a.n(o),d=a(13),u=a(4),j=a(2),h=a(23),b=a.n(h),p=a(24),f=a.n(p),O=a(0),m=function(){return Object(O.jsx)("div",{className:f.a.loader,children:"Loading..."})},x=a(15),_=a(11),g=a.n(_),w=function(e){var t=Object(j.f)(),a=Object(s.useRef)(),n=Object(s.useRef)(),r=Object(s.useContext)(x.b),c=Object(s.useState)(!1),o=Object(u.a)(c,2),l=o[0],d=o[1],h=Object(s.useState)(!1),b=Object(u.a)(h,2),p=b[0],f=b[1];return Object(O.jsx)("div",{children:Object(O.jsxs)("section",{className:g.a.auth,children:[Object(O.jsxs)("h1",{children:["MAKE ",Object(O.jsx)("span",{children:"a"})," WISH"]}),Object(O.jsx)("hr",{className:g.a.horizontal_line}),Object(O.jsxs)("form",{children:[Object(O.jsxs)("div",{className:g.a.control,children:[Object(O.jsx)("label",{htmlFor:"email",children:"Your Email"}),Object(O.jsx)("input",{type:"email",id:"email",required:!0,ref:a})]}),Object(O.jsxs)("div",{className:g.a.control,children:[Object(O.jsx)("label",{htmlFor:"password",children:"Your Password"}),Object(O.jsx)("input",{type:"password",id:"password",required:!0,ref:n})]}),Object(O.jsxs)("div",{className:g.a.actions,children:[!l&&Object(O.jsx)(i.b,{to:"/my_wishlist",onClick:function(s){s.preventDefault();var c,i=a.current.value,o=n.current.value;d(!0);c="https://identitytoolkit.googleapis.com/v1/accounts:signInWithPassword?key=".concat("AIzaSyDmKuxhqvy2Gt55tZcWLmf4xmq1K7TBgpI"),i&&o?fetch(c,{method:"POST",body:JSON.stringify({email:i,password:o,returnSecureToken:!0}),headers:{"Content-Type":"application/json"}}).then((function(e){return d(!1),e.ok?e.json():e.json().then((function(e){if(e&&e.error&&e.error.message)switch(e.error.message){case"WEAK_PASSWORD : Password should be at least 6 characters":f("Password should be at least 6 characters");break;case"EMAIL_EXISTS":f("Email is already in use");break;case"INVALID_PASSWORD":f("Email and Password do not match");break;case"INVALID_EMAIL":f("".concat(i," is not a valid Email"));break;case"EMAIL_NOT_FOUND":f("Could not find account for ".concat(i));break;case"TOO_MANY_ATTEMPTS_TRY_LATER : Access to this account has been temporarily disabled due to many failed login attempts. You can immediately restore it by resetting your password or you can try again later.":f("To many attempts. Please try again later");break;default:f("Authentication failed")}throw new Error(p)}))})).then((function(a){r.login(a.idToken),e.onPassUid(a.localId),t.replace("/my_wishlist")})).catch((function(e){console.log(e.message)})):(f("Please fill all fields"),d(!1))},children:Object(O.jsx)("button",{type:"submit",children:"Login"})}),l&&Object(O.jsx)(m,{}),Object(O.jsx)("p",{className:g.a.error,children:p&&p}),Object(O.jsx)("hr",{className:g.a.line}),Object(O.jsxs)("p",{className:g.a.register,children:["Not registered yet? Create a profile ",Object(O.jsx)(i.b,{to:"register",children:"HERE"})]})]})]})]})})},y=a(12),v=a.n(y),k=function(e){var t=Object(j.f)(),a=Object(s.useRef)(),n=Object(s.useRef)(),r=Object(s.useRef)(),c=Object(s.useRef)(),o=Object(s.useContext)(x.b),h=Object(s.useState)(!1),b=Object(u.a)(h,2),p=b[0],f=b[1],m=Object(s.useState)(!1),_=Object(u.a)(m,2),g=_[0],w=_[1];function y(){return(y=Object(d.a)(l.a.mark((function e(t,a){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://make-a-wish-2c068-default-rtdb.europe-west1.firebasedatabase.app/".concat(t,"/profile.json"),{method:"POST",body:JSON.stringify(a),headers:{"Content-Type":"application/json"}});case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(O.jsx)("div",{children:Object(O.jsxs)("section",{className:v.a.auth,children:[Object(O.jsx)("h1",{children:"Register"}),Object(O.jsx)("hr",{className:v.a.line}),Object(O.jsxs)("form",{children:[Object(O.jsxs)("div",{className:v.a.control,children:[Object(O.jsx)("label",{htmlFor:"name",children:"Username"}),Object(O.jsx)("input",{type:"name",id:"name",required:!0,ref:a})]}),Object(O.jsxs)("div",{className:v.a.control,children:[Object(O.jsx)("label",{htmlFor:"email",children:"Email"}),Object(O.jsx)("input",{type:"email",id:"email",required:!0,ref:r})]}),Object(O.jsxs)("div",{className:v.a.control,children:[Object(O.jsx)("label",{htmlFor:"dob",children:"Birthday"}),Object(O.jsx)("input",{type:"date",id:"dob",required:!0,ref:n})]}),Object(O.jsxs)("div",{className:v.a.control,children:[Object(O.jsx)("label",{htmlFor:"password",children:"Password"}),Object(O.jsx)("input",{type:"password",id:"password",required:!0,ref:c})]}),Object(O.jsxs)("div",{className:v.a.actions,children:[Object(O.jsxs)("div",{children:[Object(O.jsx)(i.b,{to:"/my_wishlist",onClick:function(s){s.preventDefault();var i,l=r.current.value,d=c.current.value,u={name:a.current.value,dob:n.current.value,email:l};f(!0);i="https://identitytoolkit.googleapis.com/v1/accounts:signUp?key=".concat("AIzaSyDmKuxhqvy2Gt55tZcWLmf4xmq1K7TBgpI"),l&&d?fetch(i,{method:"POST",body:JSON.stringify({email:l,password:d,returnSecureToken:!0}),headers:{"Content-Type":"application/json"}}).then((function(e){return f(!1),e.ok?e.json():e.json().then((function(e){if(console.log(e.error),e&&e.error&&e.error.message)switch(e.error.message){case"WEAK_PASSWORD : Password should be at least 6 characters":w("Password should be at least 6 characters");break;case"EMAIL_EXISTS":w("Email is already in use");break;case"INVALID_EMAIL":w("".concat(l," is not a valid Email"));break;default:w("Registration failed")}throw new Error(g)}))})).then((function(a){alert("Registration successful!"),e.onPassUid(a.localId),o.login(a.idToken),t.replace("/my_wishlist"),function(e,t){y.apply(this,arguments)}(a.localId,u)})).catch((function(e){console.log(e.message)})):(w("Please fill all fields"),f(!1),console.log(e.onPassUid))},children:Object(O.jsx)("button",{type:"submit",children:"Sign Up"})}),Object(O.jsx)(i.b,{to:"/login",children:Object(O.jsx)("button",{type:"submit",children:"Cancel"})})]}),p&&Object(O.jsx)("p",{children:"Loading...."}),Object(O.jsx)("p",{className:v.a.error,children:g&&g})]})]})]})})},S=a(9),N=a.n(S),P=function(e){var t=Object(j.f)(),a=Object(s.useState)([]),n=Object(u.a)(a,2),r=n[0],c=n[1],i=Object(s.useState)(!1),o=Object(u.a)(i,2),h=o[0],b=o[1],p=Object(s.useCallback)(Object(d.a)(l.a.mark((function t(){var a,s,n,r;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(""===e.uid){t.next=16;break}return t.prev=1,t.next=4,fetch("https://make-a-wish-2c068-default-rtdb.europe-west1.firebasedatabase.app/".concat(e.uid,"/profile.json"));case 4:if((a=t.sent).ok){t.next=7;break}throw new Error("Something went wrong!");case 7:return t.next=9,a.json();case 9:for(r in s=t.sent,n=[],s)n.push({name:s[r].name,dob:s[r].dob,email:s[r].email}),c(n);t.next=16;break;case 14:t.prev=14,t.t0=t.catch(1);case 16:case"end":return t.stop()}}),t,null,[[1,14]])}))),[e.uid]);Object(s.useEffect)((function(){p()}),[p]);return void 0!==r[0]?Object(O.jsx)("div",{children:Object(O.jsxs)("section",{className:N.a.profile,children:[Object(O.jsx)("h2",{className:N.a.heading,children:"Personal Profile"}),Object(O.jsxs)("p",{children:["Username: ",Object(O.jsx)("span",{className:N.a.userData,children:r[0].name})]}),Object(O.jsxs)("p",{children:["Date of Birth: ",Object(O.jsx)("span",{className:N.a.userData,children:r[0].dob})]}),Object(O.jsxs)("p",{children:["E-Mail: ",Object(O.jsx)("span",{className:N.a.userData,children:r[0].email})]}),Object(O.jsx)("hr",{}),Object(O.jsxs)("div",{children:[Object(O.jsx)("h3",{className:N.a.heading,children:"Private Information"}),Object(O.jsx)("p",{className:h?N.a.show:N.a.hide,children:h?"UserID: "+e.uid:"Confidential information"}),Object(O.jsx)("button",{className:N.a.privacyButton,type:"button",onClick:function(){b(!h)},children:h?"Hide":"Show"})]}),Object(O.jsx)("button",{className:N.a.cancelButton,type:"button",onClick:function(e){e.preventDefault(),t.replace("/my_wishlist")},children:"Back"})]})}):Object(O.jsx)(m,{})},A=n.a.lazy((function(){return a.e(4).then(a.bind(null,48))})),E=n.a.lazy((function(){return Promise.all([a.e(3),a.e(6)]).then(a.bind(null,49))})),I=n.a.lazy((function(){return a.e(5).then(a.bind(null,50))}));var T=function(){var e=Object(s.useState)(!1),t=Object(u.a)(e,2),a=t[0],n=t[1],r=Object(s.useState)(null),c=Object(u.a)(r,2),i=c[0],o=c[1],h=Object(s.useState)([]),p=Object(u.a)(h,2),f=p[0],m=p[1],x=Object(s.useState)(""),_=Object(u.a)(x,2),g=_[0],y=_[1],v=function(e){y(e)},S=Object(s.useCallback)(Object(d.a)(l.a.mark((function e(){var t,a,s,r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(""===g){e.next=21;break}return n(!0),o(null),e.prev=3,e.next=6,fetch("https://make-a-wish-2c068-default-rtdb.europe-west1.firebasedatabase.app/".concat(g,"/wishes.json"));case 6:if((t=e.sent).ok){e.next=9;break}throw new Error("Something went wrong!");case 9:return e.next=11,t.json();case 11:for(r in a=e.sent,s=[],a)s.push({id:r,title:a[r].title,price:a[r].price,friendList:a[r].friendList});m(s),e.next=20;break;case 17:e.prev=17,e.t0=e.catch(3),o(e.t0.message);case 20:n(!1);case 21:case"end":return e.stop()}}),e,null,[[3,17]])}))),[g]);function N(){return(N=Object(d.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://make-a-wish-2c068-default-rtdb.europe-west1.firebasedatabase.app/".concat(g,"/wishes.json"),{method:"POST",body:JSON.stringify(t),headers:{"Content-Type":"application/json"}});case 2:S();case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function T(){return(T=Object(d.a)(l.a.mark((function e(t){var a,s;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.target.parentNode.id,s="https://make-a-wish-2c068-default-rtdb.europe-west1.firebasedatabase.app/".concat(g,"/wishes/").concat(a,".json"),e.next=4,fetch(s,{method:"DELETE",headers:{"Content-Type":"application/json"}});case 4:S();case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(s.useEffect)((function(){S()}),[S]),Object(O.jsx)("main",{children:Object(O.jsxs)("div",{className:b.a.app,children:[Object(O.jsx)(j.b,{path:"",children:Object(O.jsx)(j.a,{to:"/login"})}),Object(O.jsxs)(s.Suspense,{fallback:Object(O.jsx)("p",{children:"Loading..."}),children:[Object(O.jsx)(j.b,{path:"/login",children:Object(O.jsx)(w,{onPassUid:v})}),Object(O.jsxs)(j.b,{path:"/profile",children:[Object(O.jsx)(A,{}),Object(O.jsx)(P,{uid:g})]}),Object(O.jsx)(j.b,{path:"/register",children:Object(O.jsx)(k,{onPassUid:v})}),!a&&!i&&Object(O.jsxs)(j.b,{path:"/my_wishlist",children:[Object(O.jsx)(A,{}),Object(O.jsx)(E,{onRemoveWish:function(e){return T.apply(this,arguments)},wishes:f})]}),!a&&!i&&Object(O.jsxs)(j.b,{path:"/new_wish",children:[Object(O.jsx)(A,{}),Object(O.jsx)(I,{onAddWish:function(e){return N.apply(this,arguments)}})]})]})]})})},F=function(){return Object(O.jsxs)("div",{children:[Object(O.jsx)("link",{rel:"preconnect",href:"https://fonts.gstatic.com"}),Object(O.jsx)("link",{href:"https://fonts.googleapis.com/css2?family=Montserrat:wght@400;600;900&display=swap",rel:"stylesheet"})]})};c.a.render(Object(O.jsx)(x.a,{children:Object(O.jsxs)(n.a.StrictMode,{children:[Object(O.jsx)(F,{}),Object(O.jsx)(i.a,{children:Object(O.jsx)(T,{})})]})}),document.getElementById("root"))},9:function(e,t,a){e.exports={profile:"Profile_profile__1lUTp",heading:"Profile_heading__2O8L9",userData:"Profile_userData__2hMls",show:"Profile_show__2KC1M",hide:"Profile_hide__SjXIY",privacyButton:"Profile_privacyButton__2SOdY",cancelButton:"Profile_cancelButton__gp6Fz"}}},[[38,1,2]]]);
//# sourceMappingURL=main.364d1270.chunk.js.map